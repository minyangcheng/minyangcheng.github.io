<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="android front-end," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.2" />






<meta name="description" content="fit-hybrid是一套H5混合开发工程化框架，可以让你的项目轻松使用采用混合开发模式。
在对渲染速度和性能要求度不高，且需要迭代比较频繁的项目，特别适合使用混合开发模式，这样能够采用纯前端技术进行开发，原生端只提供一些必要的接口供前端使用即可。

源码地址 : https://github.com/minyangcheng/fit-hybrid">
<meta property="og:type" content="article">
<meta property="og:title" content="混合开发工程化框架 fit-hybrid">
<meta property="og:url" content="http://yoursite.com/2018/03/05/混合开发工程化框架 fit-hybrid/index.html">
<meta property="og:site_name" content="热土豆1号">
<meta property="og:description" content="fit-hybrid是一套H5混合开发工程化框架，可以让你的项目轻松使用采用混合开发模式。
在对渲染速度和性能要求度不高，且需要迭代比较频繁的项目，特别适合使用混合开发模式，这样能够采用纯前端技术进行开发，原生端只提供一些必要的接口供前端使用即可。

源码地址 : https://github.com/minyangcheng/fit-hybrid">
<meta property="og:updated_time" content="2018-12-16T07:39:52.712Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="混合开发工程化框架 fit-hybrid">
<meta name="twitter:description" content="fit-hybrid是一套H5混合开发工程化框架，可以让你的项目轻松使用采用混合开发模式。
在对渲染速度和性能要求度不高，且需要迭代比较频繁的项目，特别适合使用混合开发模式，这样能够采用纯前端技术进行开发，原生端只提供一些必要的接口供前端使用即可。

源码地址 : https://github.com/minyangcheng/fit-hybrid">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '6346434820096132000',
      author: '楼主大人'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: "",
      labels: ""
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2018/03/05/混合开发工程化框架 fit-hybrid/"/>





  <title> 混合开发工程化框架 fit-hybrid | 热土豆1号 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">热土豆1号</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            
            公益404
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/05/混合开发工程化框架 fit-hybrid/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="minyangcheng">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="热土豆1号">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="热土豆1号" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                混合开发工程化框架 fit-hybrid
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-05T15:45:09+08:00">
              2018-03-05
            </time>

            &nbsp;|&nbsp;

            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-check-o"></i>
            </span>
            <time title="Post modified" itemprop="dateModified" datetime="2018-12-16T15:39:52+08:00">
              2018-12-16
            </time>
            
          </span>

          

          
            
          

          

          
          

          
          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>fit-hybrid是一套H5混合开发工程化框架，可以让你的项目轻松使用采用混合开发模式。</p>
<p>在对渲染速度和性能要求度不高，且需要迭代比较频繁的项目，特别适合使用混合开发模式，这样能够采用纯前端技术进行开发，原生端只提供一些必要的接口供前端使用即可。</p>
<blockquote>
<p>源码地址 : <a href="https://github.com/minyangcheng/fit-hybrid" target="_blank" rel="external">https://github.com/minyangcheng/fit-hybrid</a></p>
</blockquote>
<a id="more"></a>
<h2 id="大致实现功能思路"><a href="#大致实现功能思路" class="headerlink" title="大致实现功能思路"></a>大致实现功能思路</h2><ol>
<li>用原生代码做一个webview容器，该容器对前端开放的接口具有模块性（按照功能种类区分api）、扩展性（外部能够自由添加api）、一致性（所有api接口一致、所有接口回调方式一致），使得前端开发者能够更加方便、简单的调用原生功能</li>
<li>前端代码用指定脚本打包成一个zip文件，zip文件中有预先生成的前端构建信息，包括签名、版本号等等。将zip包放在app中，使得app能够从本地加载前端文件</li>
<li>原生通过比对zip包中签名信息，判断该zip包是否能运行在容器中</li>
<li>事件通知处理</li>
<li>开发过程中更好的调试功能</li>
<li>希望能够像类似于叮叮一样的开放平台,外部能够轻松的开发一些功能运行在容器上面<a href="https://open-doc.dingtalk.com/docs/doc.htm?spm=a219a.7629140.0.0.hliggq&amp;treeId=171&amp;articleId=104910&amp;docType=1" target="_blank" rel="external">https://open-doc.dingtalk.com/docs/doc.htm?spm=a219a.7629140.0.0.hliggq&amp;treeId=171&amp;articleId=104910&amp;docType=1</a></li>
</ol>
<h2 id="如何使用？"><a href="#如何使用？" class="headerlink" title="如何使用？"></a>如何使用？</h2><h3 id="android端使用"><a href="#android端使用" class="headerlink" title="android端使用"></a>android端使用</h3><ul>
<li><p>配置Hybrid</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">HybridConfiguration configuration = new HybridConfiguration(this)</div><div class="line">                .setPageHostUrl(&quot;http://10.10.12.153:8080&quot;)</div><div class="line">                .setCheckApiHandler(new CheckApiHandler() &#123;</div><div class="line">                    @Override</div><div class="line">                    public void checkRequest(ResourceCheck resourceCheck) &#123;</div><div class="line">                        checkApiRequest(resourceCheck);</div><div class="line">                    &#125;</div><div class="line">                &#125;);</div><div class="line">HybridManager.getInstance()</div><div class="line">        .init(configuration);</div></pre></td></tr></table></figure>
</li>
<li><p>检查是否更新</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">HybridManager.getInstance().checkVersion();</div></pre></td></tr></table></figure>
</li>
<li><p>将zip包中的内容解压到本地</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">HybridManager.getInstance().prepareJsBundle(SplashActivity.this);</div></pre></td></tr></table></figure>
</li>
<li><p>直接打开页面</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">private void toHome() &#123;</div><div class="line">        WebViewContainerActivity.startActivity(this, &quot;http://10.10.12.153:8080/&quot;);</div><div class="line">        finish();</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="front端使用"><a href="#front端使用" class="headerlink" title="front端使用"></a>front端使用</h3><ul>
<li><p>引入js脚本模块</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">import Hybrid from &apos;../hybrid-dist/hybrid-5853b623af96ea1336ca&apos;</div></pre></td></tr></table></figure>
</li>
<li><p>配置脚本</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">hybrid.error(function(error) &#123;</div><div class="line">  console.log(&apos;global error--&gt;%s&apos;,JSON.stringify(error));</div><div class="line">&#125;);</div><div class="line">hybrid.ready(function () &#123;</div><div class="line">  console.log(&apos;权限校验成功&apos;);</div><div class="line">&#125;);</div><div class="line">hybrid.config(&#123;</div><div class="line">  jsApiList:[&apos;pay&apos;]</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</li>
<li><p>调用api</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">//打开新页面</div><div class="line">hybrid.page.open(&#123;pageUrl: &apos;/AuthPage&apos;&#125;);</div><div class="line">//toast</div><div class="line">hybrid.ui.toast(&apos;this is toast test&apos;);</div><div class="line">//弹出alert对话框</div><div class="line">hybrid.ui.alert(&#123;</div><div class="line">              title: &apos;提示&apos;,</div><div class="line">              message: &apos;要么进化，要么去死&apos;,</div><div class="line">              buttonLabels: [&apos;取消&apos;,&apos;去进化&apos;],</div><div class="line">              cancelable: 1,</div><div class="line">              success(result)&#123;</div><div class="line">                hybrid.ui.toast(JSON.stringify(result));</div><div class="line">              &#125;,</div><div class="line">              error(err)&#123;</div><div class="line">                hybrid.ui.toast(JSON.stringify(err));</div><div class="line">              &#125;</div><div class="line">            &#125;);</div><div class="line">//日期选择对话框</div><div class="line">hybrid.ui.pickDate(&#123;</div><div class="line">              datetime:&apos;2018-03-01&apos;,</div><div class="line">              success(result)&#123;</div><div class="line">                hybrid.ui.toast(JSON.stringify(result));</div><div class="line">              &#125;,</div><div class="line">              error(err)&#123;</div><div class="line">                hybrid.ui.toast(JSON.stringify(err));</div><div class="line">              &#125;</div><div class="line">            &#125;);</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="打包操作"><a href="#打包操作" class="headerlink" title="打包操作"></a>打包操作</h3><ul>
<li>运行<code>npm run build</code> ，在output目录下会生成一个如bundle-1.0.6-2018-03-05-144651.zip的文件，然后将该文件拷贝到app中即可</li>
</ul>
<h1 id="JsBridge-js和java交互部分"><a href="#JsBridge-js和java交互部分" class="headerlink" title="JsBridge(js和java交互部分)"></a>JsBridge(js和java交互部分)</h1><ul>
<li><em>js调用java消息格式<code>QuickHybridJSBridge://ui:1882271515/pickTime?{&quot;time&quot;:&quot;18:07&quot;,&quot;title&quot;:&quot;请选择时间&quot;,&quot;timeFormat&quot;:&quot;HH:mm&quot;}</code></em></li>
<li><em>java调用js消息格式<code>callJs--&gt;javascript:JSBridge._handleMessageFromNative({&quot;responseData&quot;:{&quot;msg&quot;:&quot;&quot;,&quot;result&quot;:{&quot;time&quot;:&quot;18:08&quot;},&quot;code&quot;:1},&quot;responseId&quot;:&quot;1882271515&quot;});</code></em></li>
</ul>
<h3 id="js"><a href="#js" class="headerlink" title="js"></a>js</h3><ul>
<li><p>定义api</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">hybridJs.extendModule(&apos;ui&apos;, [&#123;</div><div class="line">    namespace: &apos;toast&apos;,</div><div class="line">    os: [&apos;quick&apos;],</div><div class="line">    defaultParams: &#123;</div><div class="line">      message: &apos;&apos;,</div><div class="line">    &#125;,</div><div class="line">    runCode(...rest) &#123;</div><div class="line">      // 兼容字符串形式</div><div class="line">      const args = innerUtil.compatibleStringParamsToObject.call(</div><div class="line">        this,</div><div class="line">        rest,</div><div class="line">        &apos;message&apos;);</div><div class="line">      hybridJs.callInner.apply(this, args);</div><div class="line">    &#125;,</div><div class="line">  &#125;])</div></pre></td></tr></table></figure>
</li>
<li><p>代理定义的api</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">function proxyApiNamespace(apiParent, apiName, finalNameSpace, api) &#123;</div><div class="line">        // 代理API，将apiParent里的apiName代理到Proxy执行</div><div class="line">        Object.defineProperty(apiParent, apiName, &#123;</div><div class="line">            configurable: true,</div><div class="line">            enumerable: true,</div><div class="line">            get: function proxyGetter() &#123;</div><div class="line">                // 确保get得到的函数一定是能执行的</div><div class="line">                const nameSpaceApi = proxysApis[finalNameSpace];</div><div class="line">                // 得到当前是哪一个环境，获得对应环境下的代理对象</div><div class="line">                const proxyObj = nameSpaceApi[getCurrProxyApiOs(os)] || nameSpaceApi.h5;</div><div class="line"></div><div class="line">                if (proxyObj) &#123;</div><div class="line">                    /**</div><div class="line">                     * 返回代理对象，所以所有的api都会通过这个代理函数</div><div class="line">                     * 注意引用问题，如果直接返回原型链式的函数对象，由于是在getter中，里面的this会被改写</div><div class="line">                     * 所以需要通过walk后主动返回</div><div class="line">                     */</div><div class="line">                    return proxyObj.walk();</div><div class="line">                &#125;</div><div class="line"></div><div class="line">                // 正常情况下走不到，除非预编译的时候在walk里手动抛出</div><div class="line">                const osErrorTips = api.os ? (api.os.join(&apos;或&apos;)) : &apos;&quot;非法&quot;&apos;;</div><div class="line">                const msg = `$&#123;api.namespace&#125;要求的os环境为:$&#123;osErrorTips&#125;`;</div><div class="line"></div><div class="line">                showError(globalError.ERROR_TYPE_APIOS.code, msg);</div><div class="line"></div><div class="line">                return noop;</div><div class="line">            &#125;,</div><div class="line">            set: function proxySetter() &#123;</div><div class="line">                showError(globalError.ERROR_TYPE_APIMODIFY.code,</div><div class="line">                    globalError.ERROR_TYPE_APIMODIFY.msg);</div><div class="line">            &#125;,</div><div class="line">        &#125;);</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
</li>
<li><p>当调用api的时候，其实是调用到Proxy.walk返回的函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">Proxy.prototype.walk = function walk() &#123;</div><div class="line">        // 实时获取promise</div><div class="line">        const Promise = hybridJs.getPromise();</div><div class="line"></div><div class="line">        // 返回一个闭包函数</div><div class="line">        return (...rest) =&gt; &#123;</div><div class="line">            let args = rest;</div><div class="line"></div><div class="line">            args[0] = args[0] || &#123;&#125;;</div><div class="line"></div><div class="line">            // 默认参数的处理</div><div class="line">            if (this.api.defaultParams &amp;&amp; (args[0] instanceof Object)) &#123;</div><div class="line">                Object.keys(this.api.defaultParams).forEach((item) =&gt; &#123;</div><div class="line">                    if (args[0][item] === undefined) &#123;</div><div class="line">                        args[0][item] = this.api.defaultParams[item];</div><div class="line">                    &#125;</div><div class="line">                &#125;);</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            // 决定是否使用Promise</div><div class="line">            let finallyCallback;</div><div class="line"></div><div class="line">            if (this.callback) &#123;</div><div class="line">                // 将this指针修正为proxy内部，方便直接使用一些api关键参数</div><div class="line">                finallyCallback = this.callback;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            if (Promise) &#123;</div><div class="line">                return finallyCallback &amp;&amp; new Promise((resolve, reject) =&gt; &#123;</div><div class="line">                    // 拓展 args</div><div class="line">                    args = args.concat([resolve, reject]);</div><div class="line">                    finallyCallback.apply(this, args);</div><div class="line">                &#125;);</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            return finallyCallback &amp;&amp; finallyCallback.apply(this, args);</div><div class="line">        &#125;;</div><div class="line">    &#125;;</div></pre></td></tr></table></figure>
</li>
<li><p>回调到定义api的runCode方法中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">runCode(...rest) &#123;</div><div class="line">      // 兼容字符串形式</div><div class="line">      const args = innerUtil.compatibleStringParamsToObject.call(</div><div class="line">        this,</div><div class="line">        rest,</div><div class="line">        &apos;message&apos;);</div><div class="line">      hybridJs.callInner.apply(this, args);</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
</li>
<li><p>将参数组成消息格式发送给原生端</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * JS调用原生方法前,会先send到这里进行处理</div><div class="line"> * @param &#123;String&#125; proto 这个属于协议头的一部分</div><div class="line"> * @param &#123;JSON&#125; message 调用的方法详情,包括方法名,参数</div><div class="line"> * @param &#123;Object&#125; responseCallback 调用完方法后的回调,或者长期回调的id</div><div class="line"> */</div><div class="line">function doSend(proto, message, responseCallback) &#123;</div><div class="line">  const newMessage = message;</div><div class="line"></div><div class="line">  if (typeof responseCallback === &apos;function&apos;) &#123;</div><div class="line">    // 如果传入的回调时函数，需要给它生成id</div><div class="line">    // 取到一个唯一的callbackid</div><div class="line">    const callbackId = getCallbackId();</div><div class="line">    // 回调函数添加到短期集合中</div><div class="line">    responseCallbacks[callbackId] = responseCallback;</div><div class="line">    // 方法的详情添加回调函数的关键标识</div><div class="line">    newMessage.callbackId = callbackId;</div><div class="line">  &#125; else &#123;</div><div class="line">    // 如果传入时已经是id，代表已经在回调池中了，直接使用即可</div><div class="line">    newMessage.callbackId = responseCallback;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  // 获取 触发方法的url scheme</div><div class="line">  const uri = getUri(proto, newMessage);</div><div class="line"></div><div class="line">  if (os.quick) &#123;</div><div class="line">    // 依赖于os判断</div><div class="line">    if (os.ios) &#123;</div><div class="line">      // ios采用</div><div class="line">      window.webkit.messageHandlers.WKWebViewJavascriptBridge.postMessage(uri);</div><div class="line">    &#125; else &#123;</div><div class="line">      window.top.prompt(uri, &apos;&apos;);</div><div class="line">    &#125;</div><div class="line">  &#125; else &#123;</div><div class="line">    // 浏览器</div><div class="line">    warn(`浏览器中jsbridge无效,对应scheme:$&#123;uri&#125;`);</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>原生回调处理</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * 原生调用H5页面注册的方法,或者调用回调方法</div><div class="line"> * @param &#123;String&#125; messageJSON 对应的方法的详情,需要手动转为json</div><div class="line"> */</div><div class="line">JSBridge._handleMessageFromNative = function _handleMessageFromNative(messageJSON) &#123;</div><div class="line">  /**</div><div class="line">   * 处理原生过来的方法</div><div class="line">   */</div><div class="line">  function doDispatchMessageFromNative() &#123;</div><div class="line">    let message;</div><div class="line">    try &#123;</div><div class="line">      if (typeof messageJSON === &apos;string&apos;) &#123;</div><div class="line">        message = decodeURIComponent(messageJSON);</div><div class="line">        message = JSON.parse(message);</div><div class="line">      &#125; else &#123;</div><div class="line">        message = messageJSON;</div><div class="line">      &#125;</div><div class="line">    &#125; catch (e) &#123;</div><div class="line">      showError(</div><div class="line">        globalError.ERROR_TYPE_NATIVECALL.code,</div><div class="line">        globalError.ERROR_TYPE_NATIVECALL.msg);</div><div class="line"></div><div class="line">      return;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    // 回调函数</div><div class="line">    const responseId = message.responseId;</div><div class="line">    const responseData = message.responseData;</div><div class="line">    let responseCallback;</div><div class="line"></div><div class="line">    if (responseId) &#123;</div><div class="line">      // 这里规定,原生执行方法完毕后准备通知h5执行回调时,回调函数id是responseId</div><div class="line">      responseCallback = responseCallbacks[responseId];</div><div class="line">      // 默认先短期再长期</div><div class="line">      responseCallback = responseCallback || responseCallbacksLongTerm[responseId];</div><div class="line">      // 执行本地的回调函数</div><div class="line">      responseCallback &amp;&amp; responseCallback(responseData);</div><div class="line"></div><div class="line">      delete responseCallbacks[responseId];</div><div class="line">    &#125; else &#123;</div><div class="line">      /**</div><div class="line">       * 否则,代表原生主动执行h5本地的函数</div><div class="line">       * 从本地注册的函数中获取</div><div class="line">       */</div><div class="line">      let keyArr = Object.keys(messageHandlers);</div><div class="line">      keyArr.forEach(function (value, index) &#123;</div><div class="line">        if (value === message.handlerName || value.indexOf(message.handlerName, value.length - message.handlerName.length) !== -1) &#123;</div><div class="line">          const handler = messageHandlers[value];</div><div class="line">          const data = message.data;</div><div class="line">          // 执行本地函数,按照要求传入数据和回调</div><div class="line">          handler &amp;&amp; handler(data);</div><div class="line">        &#125;</div><div class="line">      &#125;)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  // 使用异步</div><div class="line">  setTimeout(doDispatchMessageFromNative);</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="android"><a href="#android" class="headerlink" title="android"></a>android</h3><ul>
<li>大致流程(以调用选择时间对话框为例子)<ol>
<li>预先定义好的ui模块</li>
<li>在ui模块钟寻找pickTime方法</li>
<li>进行数据处理，然后回调前端一个对象上属性名为1882271515的function</li>
</ol>
</li>
<li>代码<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line">HashMap&lt;String, Method&gt; methodHashMap = mExposedMethods.get(apiName);</div><div class="line">            if (methodHashMap != null &amp;&amp; methodHashMap.containsKey(methodName)) &#123;</div><div class="line">                Method method = methodHashMap.get(methodName);</div><div class="line">                HybridUtil.runOnUiThread(new Runnable() &#123;</div><div class="line">                @Override</div><div class="line">                public void run() &#123;</div><div class="line">                    if (method != null) &#123;</div><div class="line">                        try &#123;</div><div class="line">                            method.invoke(null, mContainer, JSON.parseObject(param), callback);</div><div class="line">                        &#125; catch (Exception e) &#123;</div><div class="line">                            e.printStackTrace();</div><div class="line">                            callback.applyFail(e.toString());</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">        &#125;);</div><div class="line">            &#125; else &#123;</div><div class="line">                error = apiName + &quot;.&quot; + methodName + &quot;未找到&quot;;</div><div class="line">                callback.applyFail(error);</div><div class="line">                return error;</div><div class="line">            &#125;</div><div class="line">/**</div><div class="line">     * 弹出日期选择对话框</div><div class="line">     * 参数：</div><div class="line">     * title： 标题</div><div class="line">     * datetime： 指定日期 yyyy-MM-dd</div><div class="line">     * date： 格式：yyyy-MM-dd</div><div class="line">     */</div><div class="line">    public static void pickDate(WebViewContainerFragment container, JSONObject param, final BridgeCallback callback) &#123;</div><div class="line">        String title = param.getString(&quot;title&quot;);</div><div class="line">        String dateFormatStr = param.getString(&quot;dateFormat&quot;);</div><div class="line">        String date = param.getString(&quot;datetime&quot;);</div><div class="line">        DialogUtil.showDateDialog(container.getContext(), title, dateFormatStr, date, true, new DialogUtil.OnDateDialogListener() &#123;</div><div class="line">            @Override</div><div class="line">            public void onDataSelect(String dateStr) &#123;</div><div class="line">                JSONObject result = new JSONObject();</div><div class="line">                result.put(&quot;date&quot;, dateStr);</div><div class="line">                callback.applySuccess(result);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line">private void apply(JSONObject responseData) &#123;</div><div class="line">        JSONObject jsonObject = new JSONObject();</div><div class="line">        jsonObject.put(&quot;responseId&quot;, port);</div><div class="line">        jsonObject.put(&quot;responseData&quot;, responseData);</div><div class="line">        String execJs = String.format(JS_FUNCTION, jsonObject.toJSONString());</div><div class="line">        HybridWebView webView = webViewRef.get();</div><div class="line">        if (webView != null &amp;&amp; checkContext(webView.getContext()) &amp;&amp; webView.getParent() != null) &#123;</div><div class="line">            L.d(HybridConstants.LOG_TAG, String.format(&quot;callJs--&gt;%s&quot;, js));</div><div class="line">            webView.loadUrl(js);</div><div class="line">        &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="更新升级zip包"><a href="#更新升级zip包" class="headerlink" title="更新升级zip包"></a>更新升级zip包</h1><ol>
<li>当应用每次从后台回到前台的时候（包括首次启动），对比本地版本号和远程版本号，如果远程版本号比本地大，则下载远程包并用downloadVersion记下该版本号</li>
<li>当应用进入程序页面的时候，首先查看是否有远程版本号，如果该远程版本号大于资源版本号，则直接使用远程版本;如果该远程版本号小于资源版本号，并且资源版本号大于本地版本号，或者本地没有版本号，则直接使用资源版本号</li>
<li>解压zip包，根据文件夹下的文件计算singautre，对比buildCongig文件中签名，如果一致则该zip包中的内容合法<br>4 代码<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">String localVersion = SharePreferenceUtil.getVersion(mContext);</div><div class="line">            if (HybridUtil.compareVersion(remoteVersion, localVersion) &gt; 0) &#123;</div><div class="line">                download(remoteVersion, md5, dist);</div><div class="line">            &#125; else &#123;</div><div class="line">                mCurrentStatus = HybridConstants.Version.SLEEP;</div><div class="line">            &#125;</div><div class="line">public long prepareJsBundle(Context context) &#123;</div><div class="line">        long startTime = new Date().getTime();</div><div class="line">        if (SharePreferenceUtil.getInterceptorActive(context)) &#123;</div><div class="line">            String downloadVersion = SharePreferenceUtil.getDownLoadVersion(context);</div><div class="line">            String assetsVersion = AssetsUtil.getAssetsVersionInfo(context);</div><div class="line">            if (!TextUtils.isEmpty(downloadVersion) &amp;&amp; HybridUtil.compareVersion(downloadVersion, assetsVersion) &gt; 0) &#123;</div><div class="line">                File zip = FileUtil.getFileInDir(FileUtil.getTempBundleDir(context), 0);</div><div class="line">                FileUtil.deleteFile(FileUtil.getBundleDir(context));</div><div class="line">                FileUtil.unZip(zip, FileUtil.getBundleDir(context));</div><div class="line">                updateVersion(context, downloadVersion);</div><div class="line">                SharePreferenceUtil.setDownLoadVersion(context, null);</div><div class="line">                L.d(HybridConstants.LOG_TAG, &quot;prepare js bundle from zip file , version=%s&quot;, downloadVersion);</div><div class="line">            &#125; else &#123;</div><div class="line">                String localVersion = SharePreferenceUtil.getVersion(context);</div><div class="line">                if (TextUtils.isEmpty(localVersion) || HybridUtil.compareVersion(assetsVersion, localVersion) &gt; 0) &#123;</div><div class="line">                    transferInsideBundle(context);</div><div class="line">                    L.d(HybridConstants.LOG_TAG, &quot;prepare js bundle from assert&quot;);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        long time = new Date().getTime() - startTime;</div><div class="line">        L.d(HybridConstants.LOG_TAG, &quot;prepare js bundle waste time=%s&quot;, time);</div><div class="line">        return time;</div><div class="line">    &#125;</div><div class="line">private boolean validateSignature(Context context) &#123;</div><div class="line">    String evaluateSignature = SignatureUtil.evaluateSignature(FileUtil.getBundleDir(context));</div><div class="line">    String buildSignature = SignatureUtil.getSignatureFromBuildConfig(context);</div><div class="line">    return !TextUtils.isEmpty(evaluateSignature) &amp;&amp; !TextUtils.isEmpty(buildSignature)</div><div class="line">            &amp;&amp; evaluateSignature.equals(buildSignature);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="打包"><a href="#打包" class="headerlink" title="打包"></a>打包</h1><ol>
<li>首先运行vue自带的打包脚本命令来生成文件，放置在dist文件夹下</li>
<li>在dist文件下生成buildConfig.json文件，文件中放置该次打包的一些信息（版本号:npm package.json文件的version字段、签名等）</li>
<li>将dist文件夹下的内容，根据一定的规则生成如<code>bundle-1.0.3-2018-03-03-195448.zip</code>的zip包</li>
<li>将打包脚本通过为npm script中的build添加后置钩子实现自动构建运行</li>
</ol>
<ul>
<li>生成签名的规则<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">function signature(dir) &#123;</div><div class="line">  var files = [];</div><div class="line">  findNeedSignatureFiles(dir, files);</div><div class="line">  files.sort(function (var1, var2) &#123;</div><div class="line">    return var1 &gt; var2;</div><div class="line">  &#125;);</div><div class="line">  var allMd5 = &apos;&apos;;</div><div class="line">  files.forEach(function (file, index) &#123;</div><div class="line">    var md5 = mdFile(file);</div><div class="line">    if (md5) &#123;</div><div class="line">      allMd5 += md5;</div><div class="line">    &#125;</div><div class="line">  &#125;)</div><div class="line">  return mdStr(allMd5);</div><div class="line">&#125;</div><div class="line">function mdFile(path) &#123;</div><div class="line">  var data = fs.readFileSync(path);</div><div class="line">  var hash = crypto.createHash(&apos;md5&apos;);</div><div class="line">  var md5 = hash.update(data).digest(&apos;hex&apos;);</div><div class="line">  // console.log(&apos;path=%s,md5=%s&apos;, path, md5);</div><div class="line">  return md5;</div><div class="line">&#125;</div><div class="line">function mdStr(data) &#123;</div><div class="line">  var hash = crypto.createHash(&apos;md5&apos;);</div><div class="line">  var md5 = hash.update(data).digest(&apos;hex&apos;);</div><div class="line">  return md5;</div><div class="line">&#125;</div><div class="line">function findNeedSignatureFiles(dir, resultFiles) &#123;</div><div class="line">  if (fs.existsSync(dir)) &#123;</div><div class="line">    var files = fs.readdirSync(dir);</div><div class="line">    files.forEach(function (file, index) &#123;</div><div class="line">      var curPath = dir + &quot;/&quot; + file;</div><div class="line">      if (fs.statSync(curPath).isDirectory()) &#123; // recurse</div><div class="line">        findNeedSignatureFiles(curPath, resultFiles);</div><div class="line">      &#125; else &#123;</div><div class="line">        if (/.+\.js$/ig.test(curPath) || /.+\.css$/ig.test(curPath) || /.+\.html$/ig.test(curPath)) &#123;</div><div class="line">          resultFiles.push(curPath);</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;)</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="开发阶段调试"><a href="#开发阶段调试" class="headerlink" title="开发阶段调试"></a>开发阶段调试</h1><h3 id="进入参数调试界面"><a href="#进入参数调试界面" class="headerlink" title="进入参数调试界面"></a>进入参数调试界面</h3><p>在打开的页面单击导航栏6次即可进入调试参数设置界面（2秒内），根据开发需求，你可以更改一些参数</p>
<h3 id="页面控制台"><a href="#页面控制台" class="headerlink" title="页面控制台"></a>页面控制台</h3><p>通过开源项目eruda，可以实现手机端页面控制台</p>
<h3 id="socket-io-hybrid调试页面"><a href="#socket-io-hybrid调试页面" class="headerlink" title="socket.io hybrid调试页面"></a>socket.io hybrid调试页面</h3><p>基于scoket.io实现可以让前端代码运行在pc上，但是一旦需要调用原生端api的时候，直接通过scoket.io将请求转发到app端，实现在pc端和app端开发调试一体化</p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>


    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/android-front-end/" rel="tag"># android front-end</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/01/01/financial_plan_2018/" rel="next" title="我的2018理财计划">
                <i class="fa fa-chevron-left"></i> 我的2018理财计划
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/04/22/Weex开发工程化框架 fit-we/" rel="prev" title="Weex开发工程化框架 fit-we">
                Weex开发工程化框架 fit-we <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.png"
               alt="minyangcheng" />
          <p class="site-author-name" itemprop="name">minyangcheng</p>
          <p class="site-description motion-element" itemprop="description">生活其实是一种状态，好坏全凭的是前期的准备和现场发挥！</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">27</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">7</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/minyangcheng" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-block">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              Links
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="https://lymuxh.github.io" title="穆小灰灰" target="_blank">穆小灰灰</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://zyfzyfhaha.github.io" title="峰哥" target="_blank">峰哥</a>
                </li>
              
            </ul>
          </div>
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#大致实现功能思路"><span class="nav-number">1.</span> <span class="nav-text">大致实现功能思路</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#如何使用？"><span class="nav-number">2.</span> <span class="nav-text">如何使用？</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#android端使用"><span class="nav-number">2.1.</span> <span class="nav-text">android端使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#front端使用"><span class="nav-number">2.2.</span> <span class="nav-text">front端使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#打包操作"><span class="nav-number">2.3.</span> <span class="nav-text">打包操作</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#JsBridge-js和java交互部分"><span class="nav-number"></span> <span class="nav-text">JsBridge(js和java交互部分)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#js"><span class="nav-number">0.1.</span> <span class="nav-text">js</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#android"><span class="nav-number">0.2.</span> <span class="nav-text">android</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#更新升级zip包"><span class="nav-number"></span> <span class="nav-text">更新升级zip包</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#打包"><span class="nav-number"></span> <span class="nav-text">打包</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#开发阶段调试"><span class="nav-number"></span> <span class="nav-text">开发阶段调试</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#进入参数调试界面"><span class="nav-number">0.1.</span> <span class="nav-text">进入参数调试界面</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#页面控制台"><span class="nav-number">0.2.</span> <span class="nav-text">页面控制台</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#socket-io-hybrid调试页面"><span class="nav-number">0.3.</span> <span class="nav-text">socket.io hybrid调试页面</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2016 - 
  <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">minyangcheng</span>
</div>



        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.2"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.2"></script>



  



  




	




  
  

  

  

  

  


</body>
</html>
